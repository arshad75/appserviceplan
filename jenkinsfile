```yaml
- build:
    stage: build
    script: npm ci && npm run build
    artifacts:
      paths:
        - public
- test:
    stage: test
    script: npm test
- secrets-scan:
    stage: secrets-scan
    script: npm install -g secrets-scan && secrets-scan
- deploy:
    stage: deploy
    script: aws s3 sync public s3://my-app/
```